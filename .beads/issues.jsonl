{"id":"ha-pecron-1k6","title":"Fix token refresh not triggering on property fetch failure","description":"The automatic token refresh logic doesn't trigger when authentication fails during get_device_properties() calls.\n\n## Problem\nError: 'API error 5032: Token validation failed' during property fetching doesn't trigger token refresh.\n\nThe token refresh logic in _async_update_data() only catches exceptions that bubble up from _fetch_data(). However, authentication errors during the per-device property fetching loop (line 223) are caught by the generic exception handler (line 246-253) and just logged, so they never reach the retry logic.\n\n## Current Behavior\n- Token expires during property fetch\n- Error is logged but integration continues with no data\n- Next update attempt uses same expired token\n- User sees persistent errors until manual reload\n\n## Expected Behavior\n- Token expiration detected during property fetch\n- API reset to force re-login\n- Property fetch retried with fresh token\n- Integration recovers automatically\n\n## Solution\nMove the authentication error detection into _fetch_data() so it can:\n1. Detect 5032 errors during property fetching\n2. Reset self.api = None to force re-login\n3. Raise the exception to trigger retry in _async_update_data()\n\nOR: Move the per-device property fetching into _async_update_data() where the retry logic exists.\n\n## Location\nFile: custom_components/pecron/__init__.py\nLines: 220-253 (property fetching loop)\nRelated: 140-184 (retry logic that needs to catch these errors)\n\n## Test Case\n1. Wait for token to expire (~24 hours)\n2. Observe error 5032 during property fetch\n3. Verify auto-recovery happens on next update cycle","status":"closed","priority":0,"issue_type":"bug","owner":"jsightler@example.com","created_at":"2026-02-14T10:59:24.476365964-05:00","created_by":"jsightler","updated_at":"2026-02-14T11:00:42.121184515-05:00","closed_at":"2026-02-14T11:00:42.121184515-05:00","close_reason":"Closed"}
{"id":"ha-pecron-1l6","title":"Create GitHub repository and configure","description":"Create the GitHub repo at github.com/jsightler/ha-pecron, configure branch protection rules, and add GitHub settings","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:39.899470665-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:10:51.143776359-05:00","closed_at":"2026-02-09T23:10:51.143776359-05:00","close_reason":"Closed"}
{"id":"ha-pecron-2v4","title":"Release v0.3.0: Control features and dynamic discovery","description":"Release version 0.3.0 with major new features leveraging unofficial-pecron-api v0.2.0.\n\n## What's New in v0.3.0\n\n### Control Features\n- **Controllable Switches**: AC and DC outputs are now controllable switch entities (previously read-only binary sensors)\n- **Advanced Service**: New pecron.set_property service for controlling any writable device property\n- Users can now create automations to control power outputs\n\n### Dynamic Discovery\n- **TSL-Based Entity Creation**: Integration now queries device TSL to discover capabilities\n- Only creates entities for properties the device actually supports\n- No more 'unavailable' entities for unsupported features\n- Automatically supports new device models\n\n### Foundation Improvements\n- Upgraded to unofficial-pecron-api v0.2.0\n- Enhanced error handling with persistent notifications\n- Improved logging for diagnostics\n\n## Release Checklist\n\n1. Update manifest.json version: 0.2.5 → 0.3.0\n2. Create CHANGELOG.md entry or update existing changelog\n3. Run any tests if available\n4. Create git tag: v0.3.0\n5. Create GitHub release with release notes\n6. Update README.md if needed (document new service)\n\n## Commits Included\n- Upgrade unofficial-pecron-api from v0.1.0 to v0.2.0\n- Add controllable switch entities for AC and DC outputs\n- Add TSL-based dynamic property discovery\n- Add pecron.set_property service for advanced control","status":"open","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-14T02:22:42.799299883-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:22:54.802676937-05:00"}
{"id":"ha-pecron-4l0","title":"Add GitHub Actions CI/CD pipeline","description":"Create .github/workflows for testing, linting, and validation (ruff, type checking, Home Assistant manifest validation)","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:40.108617092-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:16:32.59134597-05:00","closed_at":"2026-02-09T23:16:32.59134597-05:00","close_reason":"Closed"}
{"id":"ha-pecron-7re","title":"Verify unofficial-pecron-api property names match expectations","description":"The sensor entities expect specific property names (battery_percentage, total_input_power, etc.) but we should verify these match what the unofficial-pecron-api actually returns. If the API uses different names (e.g., batteryPercentage, battery_pct), the sensors will show no data. Add test/debug code to log actual property structure and validate mapping.","status":"closed","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:29.205789331-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:13:10.342365446-05:00","closed_at":"2026-02-10T00:13:10.342365446-05:00","close_reason":"Added debug logging for available property attributes in coordinator and validation warnings in sensor entities when expected properties are missing."}
{"id":"ha-pecron-7z8","title":"Add TSL-based dynamic property discovery","description":"Use the new get_product_tsl() API to discover what properties each device actually supports, rather than hard-coding a fixed set of sensors.\n\nBackground:\nDifferent Pecron models have different capabilities. The TSL (Thing Specification Language) describes what each device supports. With v0.2.0, we can query this and create entities dynamically.\n\nCurrent approach:\n- Hard-coded list of sensors in SENSOR_DESCRIPTIONS\n- May show sensors for properties the device doesn't have\n- May miss new properties added to devices\n\nNew approach:\n- During setup, call api.get_product_tsl(device)\n- Parse TslProperty list to find what's available\n- Create sensor entities only for properties the device actually has\n- Potentially create switches for writable boolean properties automatically\n- Store TSL in coordinator.data for reference\n\nImplementation:\n1. Add tsl field to coordinator data structure\n2. Fetch TSL during initial device discovery in _fetch_data()\n3. In sensor.py async_setup_entry, filter SENSOR_DESCRIPTIONS by what TSL reports\n4. Consider creating generic sensors for TSL properties not in our description list\n5. Log discovered writable properties for future control features\n\nBenefits:\n- No 'unavailable' entities for unsupported properties\n- Automatically support new device models\n- Foundation for advanced control features\n- Better user experience (only relevant entities shown)\n\nChallenges:\n- Need to map TSL property codes to our sensor descriptions\n- Handle devices with varying capabilities\n- Ensure entities don't disappear if TSL query fails (graceful fallback)\n\nDependencies:\n- Blocks on: API v0.2.0 upgrade (ha-pecron-dxo)\n\nNice-to-have:\n- Could be combined with switch entity work to auto-create switches for writable bool properties","status":"closed","priority":2,"issue_type":"feature","owner":"jsightler@example.com","created_at":"2026-02-14T01:48:56.021515366-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:19:13.68821791-05:00","closed_at":"2026-02-14T02:19:13.68821791-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ha-pecron-7z8","depends_on_id":"ha-pecron-dxo","type":"blocks","created_at":"2026-02-14T01:56:47.595206223-05:00","created_by":"jsightler"}]}
{"id":"ha-pecron-85t","title":"Implement automatic token refresh on authentication failure","description":"Currently the integration only logs in once during initialization (line 162 in __init__.py). If the Pecron API token expires during normal operation, subsequent API calls fail with authentication errors and the integration stops working until manually reloaded.\n\nWhen an authentication error is detected in _async_update_data (lines 147-149), we should:\n\n1. Reset the API instance to None to trigger re-initialization\n2. Retry the _fetch_data operation which will automatically re-login\n3. Add retry logic with a maximum attempt count to avoid infinite loops\n4. Log the token refresh for debugging\n\nImplementation approach:\n- In _async_update_data, catch authentication errors\n- Set self.api = None to force re-initialization on next attempt\n- Use a retry mechanism (max 2 retries) to re-attempt the data fetch\n- On successful re-login, log 'Token refreshed successfully'\n- If re-login fails after retries, raise UpdateFailed as before\n\nFiles to modify:\n- custom_components/pecron/__init__.py (PecronDataUpdateCoordinator class)\n\nThis is a P0 bug because users will experience integration failures without understanding why, requiring manual intervention to restore functionality.","status":"closed","priority":0,"issue_type":"bug","owner":"jsightler@example.com","created_at":"2026-02-13T15:55:55.412678327-05:00","created_by":"jsightler","updated_at":"2026-02-13T15:57:06.943113293-05:00","closed_at":"2026-02-13T15:57:06.943113293-05:00","close_reason":"Implemented automatic token refresh with retry logic. Integration now handles expired tokens gracefully by resetting API connection and re-logging in automatically."}
{"id":"ha-pecron-8c2","title":"Add pre-commit hooks and code quality checks","description":"Set up pre-commit, ruff, mypy, and isort configs to maintain code quality","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:48.240582866-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:16:07.55606222-05:00","closed_at":"2026-02-09T23:16:07.55606222-05:00","close_reason":"Closed"}
{"id":"ha-pecron-8w1","title":"Add logging for device discovery and data fetching","description":"Add comprehensive logging to help diagnose issues: 1) Log number of devices found after get_devices() call, 2) Log when no devices are found on account, 3) Log successful property fetches for each device, 4) Log device names and keys when discovered. This will help users understand if the API is working but finding no devices vs other errors.","status":"closed","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:23.969698232-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:12:12.348738002-05:00","closed_at":"2026-02-10T00:12:12.348738002-05:00","close_reason":"Added comprehensive logging: device discovery counts, per-device info logs, property fetch success/failure logs, and warnings when no devices/data found."}
{"id":"ha-pecron-9gx","title":"Push code to GitHub remote","description":"Configure git remote origin and push main branch with all commits to GitHub","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:40.006311214-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:11:59.476228125-05:00","closed_at":"2026-02-09T23:11:59.476228125-05:00","close_reason":"Closed"}
{"id":"ha-pecron-aah","title":"Create manual installation guide and troubleshooting docs","description":"Create comprehensive documentation for manual installation (clone, file placement, permissions, restart procedure) and common troubleshooting steps for non-HACS installs","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:06:38.066442466-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:14:15.858930122-05:00","closed_at":"2026-02-09T23:14:15.858930122-05:00","close_reason":"Closed"}
{"id":"ha-pecron-adz","title":"Release v0.2.4 with automatic token refresh","description":"After implementing automatic token refresh, create and publish version 0.2.4.\n\nSteps:\n1. Verify the token refresh implementation is working correctly\n2. Update CHANGELOG.md with new entry for v0.2.4:\n   - Section: Fixed\n   - Entry: Automatic token refresh when API authentication expires\n   - Explain that integration now handles expired tokens gracefully without requiring manual reload\n3. Update version in custom_components/pecron/manifest.json from 0.2.3 to 0.2.4\n4. Commit changes with message 'Release v0.2.4: Automatic token refresh'\n5. Create git tag: git tag -a v0.2.4 -m 'Release v0.2.4'\n6. Push commits and tags: git push \u0026\u0026 git push --tags\n7. Verify GitHub Actions release workflow completes successfully\n8. Verify release appears on GitHub releases page\n9. Test that HACS can see the new release (if using custom repo)\n\nDependencies:\n- Blocks on: token refresh implementation bead\n\nSuccess criteria:\n- v0.2.4 release visible on GitHub\n- CHANGELOG.md updated\n- manifest.json version updated\n- All CI checks passing","status":"closed","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-13T15:56:02.057680077-05:00","created_by":"jsightler","updated_at":"2026-02-13T15:58:54.655552528-05:00","closed_at":"2026-02-13T15:58:54.655552528-05:00","close_reason":"Released v0.2.4 successfully. CHANGELOG updated, manifest version bumped, tag created and pushed. GitHub release published and all CI checks passing.","dependencies":[{"issue_id":"ha-pecron-adz","depends_on_id":"ha-pecron-85t","type":"blocks","created_at":"2026-02-13T15:56:25.835069752-05:00","created_by":"jsightler"}]}
{"id":"ha-pecron-age","title":"Improve error handling and user-visible diagnostics","description":"Improve error visibility: 1) In _fetch_data, don't silently catch all exceptions - differentiate between auth errors, connection errors, and data errors, 2) Add a diagnostics sensor showing connection status and last error, 3) Show persistent notification in HA if no devices found after successful auth, 4) Log full device and property structure at debug level to help diagnose API changes.","status":"closed","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:27.528155949-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:14:01.499549989-05:00","closed_at":"2026-02-10T00:14:01.499549989-05:00","close_reason":"Added persistent notification when no devices found. Differentiated auth/connection/data errors with specific logging and user-friendly messages."}
{"id":"ha-pecron-ax6","title":"Add controllable switch entities for AC and DC outputs","description":"With unofficial-pecron-api v0.2.0, we can now control AC and DC outputs. Convert the current read-only binary sensors to actual switch entities that users can toggle.\n\nCurrent state:\n- binary_sensor.py has AC/DC switches as read-only binary sensors\n- Users can see status but cannot control them\n\nNew functionality:\n- Create switch.py platform with PecronSwitch entities\n- AC output switch (using api.set_ac_output())\n- DC output switch (using api.set_dc_output())\n- Remove AC/DC from binary_sensor.py (only keep UPS status which is still read-only)\n- Handle CommandResult for user feedback\n- Show optimistic updates with confirmation\n\nImplementation details:\n- Inherit from SwitchEntity\n- Use coordinator data for current state\n- Call api.set_ac_output(device, enabled=True/False) in async_turn_on/async_turn_off\n- Check CommandResult.success and show persistent notification on failure\n- Add switch to PLATFORMS list in __init__.py\n\nFiles to create:\n- custom_components/pecron/switch.py\n\nFiles to modify:\n- custom_components/pecron/__init__.py (add 'switch' to PLATFORMS)\n- custom_components/pecron/binary_sensor.py (remove AC/DC switches)\n\nDependencies:\n- Blocks on: API v0.2.0 upgrade (ha-pecron-dxo)\n\nUser benefit:\n- Control power outputs directly from Home Assistant\n- Create automations to turn AC/DC on/off based on conditions\n- Turn off outputs when battery is low, etc.","status":"closed","priority":1,"issue_type":"feature","owner":"jsightler@example.com","created_at":"2026-02-14T01:48:39.491074321-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:17:42.482717698-05:00","closed_at":"2026-02-14T02:17:42.482717698-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ha-pecron-ax6","depends_on_id":"ha-pecron-dxo","type":"blocks","created_at":"2026-02-14T01:56:47.539703237-05:00","created_by":"jsightler"}]}
{"id":"ha-pecron-bh3","title":"Add entity platform reload when new devices discovered","description":"Currently async_setup_entry only runs once during initial setup. If devices are added to the account later, no new entities are created until HA restart. Implement a listener that detects new devices in coordinator data and triggers entity platform reload using hass.config_entries.async_reload() or platform-specific entity addition.","status":"closed","priority":1,"issue_type":"feature","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:25.817055281-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:17:27.670631421-05:00","closed_at":"2026-02-10T00:17:27.670631421-05:00","close_reason":"Implemented dynamic device discovery with coordinator listeners. New devices automatically detected and entities created without HA restart."}
{"id":"ha-pecron-bif","title":"Make refresh interval configurable and update default to 10 minutes","description":"Add refresh_interval to config flow schema so users can set their preferred update frequency during setup. Also add an options flow to allow changing it after initial setup without reconfiguring. Update DEFAULT_REFRESH_INTERVAL from 300 to 600 seconds (10 minutes).","status":"closed","priority":1,"issue_type":"feature","owner":"jsightler@example.com","created_at":"2026-02-10T00:28:36.850440657-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:30:14.562972788-05:00","closed_at":"2026-02-10T00:30:14.562972788-05:00","close_reason":"Added refresh_interval to config flow and options flow. Updated default from 300 to 600 seconds. Auto-reloads when changed."}
{"id":"ha-pecron-buf","title":"Add comprehensive unit tests for token refresh scenarios","description":"Create thorough unit tests to verify token refresh works correctly in all scenarios.\n\n## Test Coverage Needed\n\n### Token Expiration Scenarios\n1. **During initial device list fetch** (get_devices())\n   - Verify API reset and retry\n   - Confirm fresh login on retry\n   - Ensure devices are fetched successfully after refresh\n\n2. **During property fetch** (get_device_properties())\n   - Verify API reset when 5032 error occurs\n   - Confirm retry logic triggers\n   - Ensure successful property fetch after refresh\n\n3. **During TSL fetch** (get_product_tsl())\n   - Test auth failure handling\n   - Verify graceful fallback if TSL unavailable\n\n4. **During switch control** (set_ac_output/set_dc_output)\n   - Test token expiration during control commands\n   - Verify user gets appropriate error notification\n\n5. **During service calls** (set_device_property)\n   - Test auth failure in service handler\n   - Verify proper error reporting\n\n### Error Detection Tests\n- Test all error string patterns: '5032', 'token', 'authentication', '401', 'unauthorized'\n- Verify case-insensitive matching\n- Test with various error message formats from API\n\n### Retry Logic Tests\n- Verify max_retries is respected (2 attempts)\n- Test exponential backoff doesn't apply to auth errors (immediate retry)\n- Confirm non-auth errors don't trigger token refresh\n- Test mixed scenarios (auth error on first device, success on second)\n\n### Edge Cases\n- Multiple simultaneous update cycles with expired token\n- Token expiring between coordinator updates\n- Auth failure followed by connection error\n- Partial success (some devices succeed, one fails auth)\n\n### Mock Structure\n- Mock PecronAPI methods (login, get_devices, get_device_properties, etc.)\n- Simulate various API error responses\n- Track API reset calls (api = None)\n- Verify login() called on retry\n\n## Implementation\n- Use pytest with pytest-asyncio\n- Create test file: tests/test_token_refresh.py\n- Mock coordinator and API interactions\n- Use fixtures for common setup\n- Test both sync (_fetch_data) and async (_async_update_data) layers\n\n## Success Criteria\n- All token refresh scenarios tested\n- Code coverage \u003e 90% for coordinator retry logic\n- Tests pass consistently\n- Clear test names describing each scenario","status":"open","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-14T11:01:25.803818367-05:00","created_by":"jsightler","updated_at":"2026-02-14T11:01:25.803818367-05:00"}
{"id":"ha-pecron-d8m","title":"Initialize git repository and make initial commit","description":"Create the first commit with all project files to establish git history","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:39.790565401-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:08:49.637730534-05:00","closed_at":"2026-02-09T23:08:49.637730534-05:00","close_reason":"Closed"}
{"id":"ha-pecron-dnn","title":"Add CONTRIBUTING.md guidelines","description":"Create contribution guidelines for future developers","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:51.986062941-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:13:38.568018577-05:00","closed_at":"2026-02-09T23:13:38.568018577-05:00","close_reason":"Closed"}
{"id":"ha-pecron-dxo","title":"Upgrade to unofficial-pecron-api v0.2.0","description":"The unofficial-pecron-api library has released v0.2.0 with significant new capabilities. We're currently using v0.1.0.\n\nNew features in v0.2.0:\n- Control device outputs (turn AC/DC on/off)\n- Query TSL (Thing Specification Language) to discover device capabilities\n- Set arbitrary writable properties\n- CommandResult for tracking command success/failure\n\nChanges needed:\n1. Update manifest.json: unofficial-pecron-api==0.1.0 → unofficial-pecron-api==0.2.0\n2. Update requirements-dev.txt if present\n3. Test that existing read functionality still works\n4. Add new API methods to our integration (don't use them yet, just make them available)\n\nThis bead is a prerequisite for adding control capabilities.\n\nFiles to modify:\n- custom_components/pecron/manifest.json\n- requirements-dev.txt (if exists)\n\nRepository: https://github.com/jsight/unofficial-pecron-api\nChangelog: Check commits between v0.1.0 and latest main branch","status":"closed","priority":1,"issue_type":"task","owner":"jsightler@example.com","created_at":"2026-02-14T01:48:26.255992576-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:09:56.269327975-05:00","closed_at":"2026-02-14T02:09:56.269327975-05:00","close_reason":"Closed"}
{"id":"ha-pecron-eeg","title":"Add CHANGELOG.md and release documentation","description":"Create CHANGELOG.md for tracking version releases, and update README with installation from HACS once registered","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:47.990032281-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:13:50.494619653-05:00","closed_at":"2026-02-09T23:13:50.494619653-05:00","close_reason":"Closed"}
{"id":"ha-pecron-efq","title":"Add unit tests for integration","description":"Create tests directory with pytest tests for config_flow, sensor, and binary_sensor modules","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:48.104966901-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:18:02.362672436-05:00","closed_at":"2026-02-09T23:18:02.362672436-05:00","close_reason":"Closed"}
{"id":"ha-pecron-env","title":"Fix empty dict falsy check preventing entity creation","description":"Critical bug: In sensor.py line 106 and binary_sensor.py line 81, the check 'if coordinator.data:' treats an empty dict {} as falsy. This means if the API returns no devices or all property fetches fail, coordinator.data will be {} and no entities will be created at all. This is likely why the user sees no power station entities. Fix: Change to 'if coordinator.data is not None:' or 'if coordinator.data:' with explicit empty dict handling.","status":"closed","priority":0,"issue_type":"bug","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:22.557675457-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:12:05.867242106-05:00","closed_at":"2026-02-10T00:12:05.867242106-05:00","close_reason":"Fixed falsy check in sensor.py and binary_sensor.py. Changed from 'if coordinator.data:' to 'if coordinator.data is not None:' to properly handle empty dict. Added warning logs when no devices found."}
{"id":"ha-pecron-l5n","title":"Handle initial data fetch failures gracefully","description":"If async_config_entry_first_refresh() fails or times out, the integration setup might complete but with no data. Add retry logic with exponential backoff for the first refresh, and show a clear error message in the UI if initial data fetch fails. Consider making the integration setup fail explicitly if we can't get initial data after retries.","status":"closed","priority":1,"issue_type":"bug","owner":"jsightler@example.com","created_at":"2026-02-10T00:08:32.261255416-05:00","created_by":"jsightler","updated_at":"2026-02-10T00:14:54.190391302-05:00","closed_at":"2026-02-10T00:14:54.190391302-05:00","close_reason":"Added retry logic with exponential backoff (3 attempts, 5s/10s delays). Shows persistent notification on failure and allows setup to continue for later reload."}
{"id":"ha-pecron-vcm","title":"Add pecron.set_property service for advanced control","description":"Expose the api.set_device_property() capability as a Home Assistant service, allowing users to control any writable device property via automations or scripts.\n\nUse case:\nWhile we'll have switches for AC/DC, the TSL may reveal other writable properties (charging limits, power modes, etc.) that don't fit standard HA entity types. A service gives power users full control.\n\nService definition (services.yaml):\n\n\nImplementation:\n1. Create services.yaml in custom_components/pecron/\n2. Register service in __init__.py async_setup_entry:\n   \n3. Handle CommandResult and log success/failure\n4. Optionally trigger coordinator refresh after successful set\n\nAdvanced features:\n- Validate property code exists in device TSL before attempting\n- Type-check value against TSL data_type\n- Return service response with success/ticket/error\n- Consider a 'get_property' service for reading arbitrary properties\n\nDependencies:\n- Blocks on: API v0.2.0 upgrade (ha-pecron-dxo)\n- Nice-to-have: TSL discovery (to validate properties)\n\nDocumentation needed:\n- List common writable properties users might want to control\n- Provide automation examples\n- Explain how to discover available properties (maybe via tsl command or diagnostics)\n\nPriority: P3 (nice-to-have for power users, switches cover most common use cases)","status":"closed","priority":3,"issue_type":"feature","owner":"jsightler@example.com","created_at":"2026-02-14T01:56:40.977721976-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:20:48.200517402-05:00","closed_at":"2026-02-14T02:20:48.200517402-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ha-pecron-vcm","depends_on_id":"ha-pecron-dxo","type":"blocks","created_at":"2026-02-14T01:56:47.640018653-05:00","created_by":"jsightler"}]}
{"id":"ha-pecron-w33","title":"Create LICENSE file","description":"Add MIT license file to repository root","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:51.798560316-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:13:24.899776281-05:00","closed_at":"2026-02-09T23:13:24.899776281-05:00","close_reason":"Closed"}
{"id":"ha-pecron-wil","title":"Fix token refresh not detecting error 5032","description":"Error 5032 (Token validation failed) is not detected by current token refresh logic. Need to add detection for error code 5032 and 'token' keyword in error messages.","status":"closed","priority":0,"issue_type":"bug","owner":"jsightler@example.com","created_at":"2026-02-14T02:11:08.786168778-05:00","created_by":"jsightler","updated_at":"2026-02-14T02:11:40.839783787-05:00","closed_at":"2026-02-14T02:11:40.839783787-05:00","close_reason":"Closed"}
{"id":"ha-pecron-y0m","title":"Register integration with Home Assistant community","description":"Submit to Home Assistant HACS registry to enable installation via HACS","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:48.347237095-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-10T17:17:15.97793285-05:00","closed_at":"2026-02-10T17:17:15.97793285-05:00","close_reason":"Submitted to HACS via PR https://github.com/hacs/default/pull/5534"}
{"id":"ha-pecron-zcr","title":"Create release GitHub Action","description":"Set up automated release workflow using git tags for creating GitHub releases and publishing versions","status":"closed","priority":2,"issue_type":"task","owner":"jesse.sightler@gmail.com","created_at":"2026-02-09T23:05:52.172524493-05:00","created_by":"Jesse Sightler","updated_at":"2026-02-09T23:21:02.966294901-05:00","closed_at":"2026-02-09T23:21:02.966294901-05:00","close_reason":"Closed"}
